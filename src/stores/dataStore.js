/**
 * ðŸ“¦ æ•¸æ“šå­˜å„²æ¨¡çµ„ (Data Store Module)
 *
 * ç®¡ç†åŸŽå¸‚åœ–å±¤æ•¸æ“šå’Œåœ°åœ–å°ŽèˆªåŠŸèƒ½
 * ä½¿ç”¨ Pinia ç‹€æ…‹ç®¡ç†ç³»çµ±å’Œ Vue 3 Composition API
 */

// æ ¸å¿ƒä¾è³´
import { defineStore } from 'pinia';
import { ref } from 'vue';

/**
 * ðŸª æ•¸æ“šå­˜å„²å•†åº—å®šç¾© (Data Store Definition)
 *
 * ä½¿ç”¨ Pinia çš„ defineStore å‰µå»ºä¸€å€‹åç‚º 'data' çš„ç‹€æ…‹ç®¡ç†å•†åº—ã€‚
 * æŽ¡ç”¨ Composition API èªžæ³•ï¼Œæä¾›æ›´å¥½çš„ TypeScript æ”¯æ´å’Œä»£ç¢¼çµ„ç¹”ã€‚
 *
 * @returns {Object} åŒ…å«æ‰€æœ‰ç‹€æ…‹å’Œæ–¹æ³•çš„å•†åº—å°è±¡
 */
export const useDataStore = defineStore(
  'data', // å•†åº—å”¯ä¸€æ¨™è­˜ç¬¦
  () => {
    // ------------------------------------------------------------
    // åœ°åœ–å¯¦ä¾‹ç®¡ç†
    const mapInstance = ref(null);

    const setMapInstance = (map) => {
      mapInstance.value = map;
    };

    return {
      mapInstance, // åœ°åœ–å¯¦ä¾‹
      setMapInstance, // è¨­å®šåœ°åœ–å¯¦ä¾‹
    };
  },
  {
    persist: true,
  }
);
